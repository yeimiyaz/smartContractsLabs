<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts\ConsultingToken.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> ConsultingToken.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">98.39% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>61/62</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">50% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>21/42</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>12/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">98.44% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>63/64</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
&nbsp;
pragma solidity ^0.7.1;
&nbsp;
import "./token/ERC721/ERC721.sol";
&nbsp;
/*
Blockchain Consulting
Motivation
Suppose you would like to offer your special knowledge and services as a consultant, 
but you don’t want to waste a lot of time on the business aspects of payment coordination and marketing.  
This NFT-based business gives you an easy way to sell your time and knowledge services for money, 
even if you don’t know just how much you should charge or how to get the word out.
&nbsp;
The solution will allow to a Host (Consultant) to define NFTs for his services. 
The host can include information such as topic and time slot (start time and end time) for each appointment. 
The attendees require to have a NFT to attend the service. An attendee can resell a token for a consultant service and
increase its value.To attend the service, the attendee has to sign a particular message to demonstrate the use of the NFT. 
The attendee only can host the event in the time slot defined by the host.
*/
&nbsp;
contract ConsultingToken is ERC721("ConsultingToken", "CNS") {
    uint256 public time = block.timestamp;
&nbsp;
    enum DeliveredStatus {FOR_SALE, SOLD, RELEASE}
&nbsp;
    struct ConsultingService {
        uint256 id;
        string topic;
        uint256 price;
        uint256 startTime;
        uint256 endTime;
        string hostName;
        bool hostCheckedIn;
        DeliveredStatus status;
        address payable host;
        address payable owner;
    }
&nbsp;
    //Array of consultingServices
    ConsultingService[] private consultingServices;
&nbsp;
    //Mapping consultingServices vs tokenId
    mapping(uint256 =&gt; ConsultingService) public tokens;
&nbsp;
    modifier onlyOwner(uint256 _tokenId) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            msg.sender == (super.ownerOf(_tokenId)),
            "ConsultingService: not owner of the token"
        );
        _;
    }
&nbsp;
    modifier validStatus(DeliveredStatus _status, uint256 _tokenId) {
        ConsultingService memory consultingService = tokens[_tokenId];
        <span class="missing-if-branch" title="else path not taken" >E</span>require(consultingService.status == _status);
        _;
    }
&nbsp;
    //Create a token
    function createConsultingService(
        string memory _topic,
        uint256 _price,
        uint256 _startTime,
        uint256 _endTime,
        string memory _hostName
    ) public {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            bytes(_topic).length &gt; 0,
            "ConsultingService: The topic cannot be empty"
        );
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_price &gt; 0, "ConsultingService: The price cannot be zero");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            _startTime &gt; 0,
            "ConsultingService: The start time cannot be zero"
        );
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_endTime &gt; 0, "ConsultingService: The end time cannot be zero");
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            bytes(_hostName).length &gt; 0,
            "ConsultingService: The host name cannot be empty"
        );
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            _endTime &gt; _startTime,
            "ConsultingService: end time is before start time"
        );
&nbsp;
        ConsultingService memory _consultingService =
            ConsultingService({
                id: 0,
                topic: _topic,
                price: _price,
                startTime: _startTime,
                endTime: _endTime,
                hostName: _hostName,
                hostCheckedIn: false,
                status: DeliveredStatus.FOR_SALE,
                host: msg.sender,
                owner: msg.sender
            });
&nbsp;
        consultingServices.push(_consultingService);
&nbsp;
        uint256 tokenId = consultingServices.length - 1;
&nbsp;
        //Mint the token
        _safeMint(msg.sender, tokenId);
&nbsp;
        uint256 _index = tokenId;
        consultingServices[_index].id = _index;
&nbsp;
        _consultingService.id = _index;
        tokens[tokenId] = _consultingService;
    }
&nbsp;
    //Consult total of services
    function totalConsultingServices() public view returns (uint256) {
        return super.totalSupply();
    }
&nbsp;
    //Consult the owner of a token
    function ownerOfToken(uint256 _tokenId) public view returns (address) {
        return super.ownerOf(_tokenId);
    }
&nbsp;
    //Consult the balance of an address
    function balanceOfAddress(address _owner) public view returns (uint256) {
        return super.balanceOf(_owner);
    }
&nbsp;
    //Approve to transfer a token
    function approveTransferToken(address _attendee, uint256 _tokenId)
        public
        onlyOwner(_tokenId)
        validStatus(DeliveredStatus.FOR_SALE, _tokenId)
    {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_attendee != address(0x0));
&nbsp;
        ConsultingService memory consultingService = tokens[_tokenId];
&nbsp;
        super.approve(_attendee, _tokenId);
&nbsp;
        emit Approval(consultingService.owner, _attendee, _tokenId);
    }
&nbsp;
    //Approve to transfer all tokens to an address
    function approvalTransferTokenForAll(address _attendee) public 
    {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_attendee != address(0x0));
&nbsp;
        super.setApprovalForAll(_attendee, true);
&nbsp;
        emit ApprovalForAll(msg.sender, _attendee, true);
    }
&nbsp;
    //Validate if a token exists
    function existsToken(uint256 _tokenId) internal view returns (bool) 
    {
        return (!(tokens[_tokenId].price == 0));
    }
&nbsp;
    //Buy a consulting service
    function buyConsultingService(uint256 _tokenId)
        public
        payable
        validStatus(DeliveredStatus.FOR_SALE, _tokenId)
    {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(existsToken(_tokenId), "ConsultingService: nonexistant token");
&nbsp;
        ConsultingService memory consultingService = tokens[_tokenId];
&nbsp;
        uint256 index = consultingService.id;
&nbsp;
        bool _isApprovedOrOwner =
            (super.getApproved(_tokenId) == msg.sender ||
                super.isApprovedForAll(consultingService.owner, msg.sender));
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            _isApprovedOrOwner,
            "ConsultingService: the owner does not approve"
        );
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            msg.value &gt;= consultingService.price,
            "ConsultingService: it is not enough the value "
        );
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            msg.sender != address(0),
            "ConsultingService: the buyer has an address zero"
        );
&nbsp;
        //Transfer the token
        <span class="missing-if-branch" title="if path not taken" >I</span>if (msg.value &gt; consultingService.price) {
<span class="cstat-no" title="statement not covered" >            msg.sender.transfer(msg.value - consultingService.price)</span>;
        }
&nbsp;
        consultingService.owner.transfer(consultingService.price);
        super.transferFrom(consultingService.owner, msg.sender, _tokenId);
&nbsp;
        emit Transfer(consultingService.owner, msg.sender, _tokenId);
&nbsp;
        tokens[_tokenId].owner = msg.sender;
        tokens[_tokenId].status = DeliveredStatus.SOLD;
&nbsp;
        consultingServices[index].owner = msg.sender;
        consultingServices[index].status = DeliveredStatus.SOLD;
    }
&nbsp;
    //Resell a consulting service
    function resellConsultingService(uint256 _tokenId, uint256 _price)
        public
        payable
        onlyOwner(_tokenId)
        validStatus(DeliveredStatus.SOLD, _tokenId)
    {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(msg.sender != address(0));
        <span class="missing-if-branch" title="else path not taken" >E</span>require(existsToken(_tokenId), "ConsultingService: nonexistant token");
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_price &gt; 0);
        ConsultingService memory consultingService = tokens[_tokenId];
        uint256 index = consultingService.id;
&nbsp;
        tokens[_tokenId].status = DeliveredStatus.FOR_SALE;
        tokens[_tokenId].price = _price;
&nbsp;
        consultingServices[index].status = DeliveredStatus.FOR_SALE;
        consultingServices[index].price = _price;
    }
&nbsp;
    //Release a token after a slot of time (attend the consultant service)
    function releaseStatus(uint256 _tokenId)
        public
        onlyOwner(_tokenId)
        validStatus(DeliveredStatus.SOLD, _tokenId)
    {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(existsToken(_tokenId), "ConsultingService: nonexistant token");
&nbsp;
        ConsultingService memory consultingService = tokens[_tokenId];
        uint256 index = consultingService.id;
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>require(
            block.timestamp &gt; consultingService.startTime,
            "ConsultingService: current time is before release time"
        );
&nbsp;
        <span class="missing-if-branch" title="else path not taken" >E</span>if (consultingService.startTime &lt;= block.timestamp) {
            tokens[_tokenId].status = DeliveredStatus.RELEASE;
            tokens[_tokenId].hostCheckedIn = true;
&nbsp;
            consultingServices[index].status = DeliveredStatus.RELEASE;
            consultingServices[index].hostCheckedIn = true;
        }
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Jan 31 2021 13:19:27 GMT-0500 (Eastern Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
